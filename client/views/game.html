<template name="game">
	{{#if currentUser}}
		<h2>{{game.number}}. {{game.name}}</h2>
		<p>{{game.description}}</p>
		{{#if text.active}}
			<button class="btn btn-primary to-canvas">Play!</button>
			{{#if emptyText}}
				<button class="btn btn-inverse disabled" data-toggle="tooltip">Complete</button>
			{{else}}
				<button class="btn btn-inverse" data-toggle="modal" data-target="#complete-modal">Complete</button>

				<!-- Modal for verifying game completion -->
				<div id="complete-modal" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="complete-modal" aria-hidden="true">
					<div class="modal-body">
						<button type="button" class="close" data-dismiss="modal" aria-hidden="true">Ã—</button>
					  <p>Do you really want to complete Game {{game.number}}? You will not be able to edit game's canvas.</p>
					</div>
					<div class="modal-footer">
					  <button class="btn" data-dismiss="modal" aria-hidden="true">Cancel</button>
					  <button class="btn btn-inverse" id="complete" data-dismiss="modal" aria-hidden="true">Complete game</button>
					</div>
				</div>

			{{/if}}
		{{else}}
			<button class="btn btn-info to-canvas">Canvas</button>
			{{#if analysisComplete}}
				<button class="btn btn-info" id="to-stats">Statistics</button>
			{{else}}
				<button class="btn btn-info" data-loading-text="Analyzing..." id="analyze-text">Analyze text</button>
			{{/if}}
		{{/if}}
	{{else}}
		<p>You need to log in to play.</p>
	{{/if}}
</template>